(function(root,factory){"use strict";if(typeof define==="function"&&define.amd){define([],factory)}else if(typeof exports==="object"){module.exports=factory()}else{root.MediaBox=factory()}})(this,function(){"use strict";var MediaBox=function(element,params){var default_params={autoplay:"1"},params=params||0;if(!this||!(this instanceof MediaBox)){return new MediaBox(element,params)}if(!element){return false}this.params=Object.assign(default_params,params);this.selector=element instanceof NodeList?element:document.querySelectorAll(element);this.root=document.querySelector("body");this.run()};MediaBox.prototype={run:function(){Array.prototype.forEach.call(this.selector,function(el){el.addEventListener("click",function(e){e.preventDefault();var link=this.parseUrl(el.getAttribute("href"));this.render(link);this.events()}.bind(this),false)}.bind(this));this.root.addEventListener("keyup",function(e){if((e.keyCode||e.which)===27){this.close(this.root.querySelector(".mediabox-wrap"))}}.bind(this),false)},template:function(s,d){var p;for(p in d){if(d.hasOwnProperty(p)){s=s.replace(new RegExp("{"+p+"}","g"),d[p])}}return s},parseUrl:function(url){var service={},matches;if(matches=url.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=)([^#\&\?]*).*/)){service.provider="youtube";service.id=matches[2]}else if(matches=url.match(/https?:\/\/(?:www\.)?vimeo.com\/(?:channels\/|groups\/([^\/]*)\/videos\/|album\/(\d+)\/video\/|)(\d+)(?:$|\/|\?)/)){service.provider="vimeo";service.id=matches[3]}else{service.provider="Unknown";service.id=""}return service},render:function(service){var embedLink,lightbox,urlParams;if(service.provider==="youtube"){embedLink="https://www.youtube.com/embed/"+service.id}else if(service.provider==="vimeo"){embedLink="https://player.vimeo.com/video/"+service.id}else{throw new Error("Invalid video URL")}urlParams=this.serialize(this.params);lightbox=this.template('<div class="mediabox-wrap" role="dialog" aria-hidden="false"><div class="mediabox-content" role="document" tabindex="0"><span id="mediabox-esc" class="mediabox-close" aria-label="close" tabindex="1"></span><iframe src="{embed}{params}" frameborder="0" allowfullscreen></iframe></div></div>',{embed:embedLink,params:urlParams});this.lastFocusElement=document.activeElement;this.root.insertAdjacentHTML("beforeend",lightbox);document.body.classList.add("stop-scroll")},events:function(){var wrapper=document.querySelector(".mediabox-wrap");var content=document.querySelector(".mediabox-content");wrapper.addEventListener("click",function(e){if(e.target&&e.target.nodeName==="SPAN"&&e.target.className==="mediabox-close"||e.target.nodeName==="DIV"&&e.target.className==="mediabox-wrap"||e.target.className==="mediabox-content"&&e.target.nodeName!=="IFRAME"){this.close(wrapper)}}.bind(this),false);document.addEventListener("focus",function(e){if(content&&!content.contains(e.target)){e.stopPropagation();content.focus()}},true);content.addEventListener("keypress",function(e){if(e.keyCode===13){this.close(wrapper)}}.bind(this),false)},close:function(el){if(el===null)return true;var timer=null;if(timer){clearTimeout(timer)}el.classList.add("mediabox-hide");timer=setTimeout(function(){var el=document.querySelector(".mediabox-wrap");if(el!==null){document.body.classList.remove("stop-scroll");this.root.removeChild(el);this.lastFocusElement.focus()}}.bind(this),500)},serialize:function(obj){return"?"+Object.keys(obj).reduce(function(a,k){a.push(k+"="+encodeURIComponent(obj[k]));return a},[]).join("&")}};return MediaBox});if(typeof Object.assign!="function"){Object.defineProperty(Object,"assign",{value:function assign(target,varArgs){"use strict";if(target==null){throw new TypeError("Cannot convert undefined or null to object")}var to=Object(target);for(var index=1;index<arguments.length;index++){var nextSource=arguments[index];if(nextSource!=null){for(var nextKey in nextSource){if(Object.prototype.hasOwnProperty.call(nextSource,nextKey)){to[nextKey]=nextSource[nextKey]}}}}return to},writable:true,configurable:true})}!function(){"use strict";var nav=document.querySelector(".nav");var navItems=document.querySelector(".nav__list");var navBurger=document.querySelector(".js-nav-burger");var navOverlay=document.querySelector(".nav__overlay");function switchToStickyNav(){nav.classList.add("nav__colored");if(document.body.scrollTop===0&&!navOverlay.classList.contains("active")){nav.classList.remove("nav__colored")}}window.onscroll=function(){switchToStickyNav()};window.onload=function(){switchToStickyNav()};navBurger.addEventListener("click",e=>{navItems.classList.toggle("d-flex");navOverlay.classList.toggle("active");nav.classList.add("nav__colored")});var swiper=new Swiper(".clientSwiper",{spaceBetween:15,slidesPerView:"auto",loop:true,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}});MediaBox(".mediabox");window.addEventListener("load",function(){document.querySelector(".signup__form").addEventListener("submit",function(e){e.preventDefault();submitNewsletterForm()})});function submitNewsletterForm(){var emailAddr=document.getElementById("email").value;var errorMsg=document.querySelector(".signup__form_error");var successMsg=document.querySelector(".signup__form_success");var submitBtn=document.getElementById("newsletterSubmit");var emailInput=document.getElementById("email");var xhttp=new XMLHttpRequest;xhttp.open("POST","https://frontend-trial-api.qa.parallax.dev/api/newsletter",true);xhttp.setRequestHeader("Content-type","application/json");xhttp.send(JSON.stringify({email:emailAddr}));xhttp.onload=function(){var res=JSON.parse(this.responseText);if(res.success){successMsg.innerHTML="Thanks for signing up!";errorMsg.classList.remove("d-block");successMsg.classList.add("d-block");submitBtn.disabled=true;emailInput.disabled=true}else{errorMsg.innerHTML=res.errors.email?res.errors.email:"There was an unexpected failure";successMsg.classList.remove("d-block");errorMsg.classList.add("d-block")}};xhttp.onerror=function(e){console.log(e.target.status);errorMsg.innerHTML="There was an issue submitting the form (check that the API is up!)";successMsg.classList.remove("d-block");errorMsg.classList.add("d-block")}}}();